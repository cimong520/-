# ç¼–è¯‘é”™è¯¯ä¿®å¤è¯´æ˜

## ğŸ”´ é”™è¯¯ä¿¡æ¯

```
User\menu.c(27): error:  #77-D: this declaration has no storage class or type specifier
data.Threshold.Soil_Low = 35;

User\menu.c(27): error:  #147: declaration is incompatible with "dt data"
data.Threshold.Soil_Low = 35;

User\menu.c(27): error:  #65: expected a ";"
data.Threshold.Soil_Low = 35;
```

## ğŸ” é”™è¯¯åŸå› 

### é—®é¢˜ä»£ç ï¼ˆUser/menu.cï¼‰

```c
// å…¨å±€ä½œç”¨åŸŸ
float Temperature_Lower = 21;  // âœ… æ­£ç¡®ï¼šå˜é‡å£°æ˜å’Œåˆå§‹åŒ–
float Temperature_Upper = 27;  // âœ… æ­£ç¡®ï¼šå˜é‡å£°æ˜å’Œåˆå§‹åŒ–

data.Threshold.Soil_Low = 35;  // âŒ é”™è¯¯ï¼šåœ¨å…¨å±€ä½œç”¨åŸŸæ‰§è¡Œèµ‹å€¼è¯­å¥
data.Threshold.Soil_Up = 40;   // âŒ é”™è¯¯ï¼šåœ¨å…¨å±€ä½œç”¨åŸŸæ‰§è¡Œèµ‹å€¼è¯­å¥
```

### ä¸ºä»€ä¹ˆä¼šå‡ºé”™ï¼Ÿ

**Cè¯­è¨€è§„åˆ™**ï¼š
1. âœ… **å…è®¸**ï¼šåœ¨å…¨å±€ä½œç”¨åŸŸå£°æ˜å˜é‡å¹¶åˆå§‹åŒ–
   ```c
   int x = 10;           // æ­£ç¡®
   float y = 3.14;       // æ­£ç¡®
   ```

2. âŒ **ä¸å…è®¸**ï¼šåœ¨å…¨å±€ä½œç”¨åŸŸæ‰§è¡Œèµ‹å€¼è¯­å¥
   ```c
   x = 20;               // é”™è¯¯ï¼
   data.value = 100;     // é”™è¯¯ï¼
   ```

3. âœ… **æ­£ç¡®åšæ³•**ï¼šåœ¨å‡½æ•°ä¸­æ‰§è¡Œèµ‹å€¼
   ```c
   void init(void) {
       x = 20;           // æ­£ç¡®
       data.value = 100; // æ­£ç¡®
   }
   ```

## âœ… ä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤1ï¼šåˆ é™¤å…¨å±€ä½œç”¨åŸŸçš„èµ‹å€¼è¯­å¥

**User/menu.c**ï¼š
```c
// ä¿®å¤å‰ï¼ˆé”™è¯¯ï¼‰
float Temperature_Lower = 21;
data.Threshold.Soil_Low = 35;  // âŒ é”™è¯¯

// ä¿®å¤åï¼ˆæ­£ç¡®ï¼‰
float Temperature_Lower = 21;
// æ³¨é‡Šè¯´æ˜ï¼šé˜ˆå€¼åˆå§‹åŒ–åœ¨ Data_Init() å‡½æ•°ä¸­è¿›è¡Œ
```

### ä¿®å¤2ï¼šåœ¨åˆå§‹åŒ–å‡½æ•°ä¸­èµ‹å€¼

**System/Initialization.c**ï¼š
```c
void Data_Init(void){
    data.flag.mode = 1;
    
    // åˆå§‹åŒ–é˜ˆå€¼
    data.Threshold.Temp = 27.0;      // æ¸©åº¦ä¸Šé™
    data.Threshold.Humi = 80.0;      // æ¹¿åº¦ä¸Šé™
    data.Threshold.Soil_Low = 35.0;  // åœŸå£¤æ¹¿åº¦ä¸‹é™
    data.Threshold.Soil_Up = 40.0;   // åœŸå£¤æ¹¿åº¦ä¸Šé™
    data.Threshold.Light_Low = 15.0; // å…‰ç…§ä¸‹é™
    data.Threshold.Light_Up = 20.0;  // å…‰ç…§ä¸Šé™
}
```

## ğŸ“Š å¯¹æ¯”è¯´æ˜

### å˜é‡å£°æ˜ vs èµ‹å€¼è¯­å¥

| æ“ä½œ | å…¨å±€ä½œç”¨åŸŸ | å‡½æ•°å†… | ç¤ºä¾‹ |
|------|-----------|--------|------|
| **å˜é‡å£°æ˜+åˆå§‹åŒ–** | âœ… å…è®¸ | âœ… å…è®¸ | `int x = 10;` |
| **èµ‹å€¼è¯­å¥** | âŒ ä¸å…è®¸ | âœ… å…è®¸ | `x = 20;` |
| **ç»“æ„ä½“æˆå‘˜èµ‹å€¼** | âŒ ä¸å…è®¸ | âœ… å…è®¸ | `data.value = 100;` |

### æ­£ç¡®çš„åˆå§‹åŒ–æ–¹å¼

```c
// æ–¹å¼1ï¼šå£°æ˜æ—¶åˆå§‹åŒ–ï¼ˆå…¨å±€å˜é‡ï¼‰
int global_var = 100;  // âœ… æ­£ç¡®

// æ–¹å¼2ï¼šåœ¨å‡½æ•°ä¸­èµ‹å€¼ï¼ˆç»“æ„ä½“æˆå‘˜ï¼‰
void init(void) {
    data.Threshold.Soil_Low = 35.0;  // âœ… æ­£ç¡®
}

// æ–¹å¼3ï¼šä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨ï¼ˆç»“æ„ä½“ï¼‰
dt data = {
    .Threshold = {
        .Soil_Low = 35.0,
        .Soil_Up = 40.0
    }
};  // âœ… æ­£ç¡®ï¼ˆä½†ä¸æ¨èï¼Œå› ä¸ºdataå·²åœ¨å…¶ä»–åœ°æ–¹å£°æ˜ï¼‰
```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. å…¨å±€æ•°æ®ç»“æ„åˆå§‹åŒ–

**æ¨èåšæ³•**ï¼šåœ¨ä¸“é—¨çš„åˆå§‹åŒ–å‡½æ•°ä¸­è¿›è¡Œ

```c
// System/Initialization.c
void Data_Init(void) {
    // åˆå§‹åŒ–æ‰€æœ‰å…¨å±€æ•°æ®ç»“æ„
    data.flag.mode = 1;
    data.Threshold.Temp = 27.0;
    data.Threshold.Humi = 80.0;
    // ... å…¶ä»–åˆå§‹åŒ–
}
```

**ä¼˜ç‚¹**ï¼š
- âœ… é›†ä¸­ç®¡ç†åˆå§‹åŒ–é€»è¾‘
- âœ… æ˜“äºç»´æŠ¤å’Œä¿®æ”¹
- âœ… ç¬¦åˆCè¯­è¨€è§„èŒƒ
- âœ… åˆå§‹åŒ–é¡ºåºå¯æ§

### 2. å±€éƒ¨å˜é‡åˆå§‹åŒ–

**æ¨èåšæ³•**ï¼šå£°æ˜æ—¶ç›´æ¥åˆå§‹åŒ–

```c
// User/menu.c
float Temperature_Lower = 21;  // âœ… æ¨è
float Temperature_Upper = 27;  // âœ… æ¨è
```

### 3. å¸¸é‡å®šä¹‰

**æ¨èåšæ³•**ï¼šä½¿ç”¨å®æˆ–const

```c
// æ–¹å¼1ï¼šä½¿ç”¨å®
#define TEMP_THRESHOLD_LOW  21.0
#define TEMP_THRESHOLD_HIGH 27.0

// æ–¹å¼2ï¼šä½¿ç”¨const
const float TEMP_THRESHOLD_LOW = 21.0;
const float TEMP_THRESHOLD_HIGH = 27.0;
```

## ğŸ”§ ä¿®å¤éªŒè¯

### ç¼–è¯‘æµ‹è¯•

```bash
# é‡æ–°ç¼–è¯‘é¡¹ç›®
Build target 'Target 1'
compiling menu.c...
compiling Initialization.c...
linking...
Build succeeded!  # âœ… æˆåŠŸ
```

### è¿è¡Œæ—¶éªŒè¯

```c
// åœ¨mainå‡½æ•°ä¸­éªŒè¯
void main(void) {
    Initialization();  // è°ƒç”¨åˆå§‹åŒ–
    
    // éªŒè¯é˜ˆå€¼æ˜¯å¦æ­£ç¡®åˆå§‹åŒ–
    Serial_Printf("Soil_Low: %.1f\r\n", data.Threshold.Soil_Low);
    // è¾“å‡º: Soil_Low: 35.0
}
```

## ğŸ“ ç›¸å…³çŸ¥è¯†ç‚¹

### Cè¯­è¨€ä½œç”¨åŸŸè§„åˆ™

```c
// å…¨å±€ä½œç”¨åŸŸ
int global_var = 10;        // âœ… å£°æ˜+åˆå§‹åŒ–
// global_var = 20;         // âŒ ä¸èƒ½æ‰§è¡Œè¯­å¥

void function(void) {
    // å‡½æ•°ä½œç”¨åŸŸ
    int local_var = 10;     // âœ… å£°æ˜+åˆå§‹åŒ–
    local_var = 20;         // âœ… èµ‹å€¼è¯­å¥
    global_var = 30;        // âœ… ä¿®æ”¹å…¨å±€å˜é‡
}
```

### åˆå§‹åŒ–æ—¶æœº

```c
// ç¼–è¯‘æ—¶åˆå§‹åŒ–ï¼ˆå…¨å±€å˜é‡ï¼‰
int x = 10;  // åœ¨ç¨‹åºåŠ è½½æ—¶åˆå§‹åŒ–

// è¿è¡Œæ—¶åˆå§‹åŒ–ï¼ˆå‡½æ•°ä¸­ï¼‰
void init(void) {
    data.value = 100;  // åœ¨å‡½æ•°è°ƒç”¨æ—¶åˆå§‹åŒ–
}
```

## âœ… æ€»ç»“

**é—®é¢˜**ï¼šåœ¨å…¨å±€ä½œç”¨åŸŸæ‰§è¡Œäº†èµ‹å€¼è¯­å¥

**åŸå› **ï¼šCè¯­è¨€ä¸å…è®¸åœ¨å…¨å±€ä½œç”¨åŸŸæ‰§è¡Œè¯­å¥ï¼Œåªèƒ½å£°æ˜å˜é‡

**è§£å†³**ï¼š
1. âœ… åˆ é™¤å…¨å±€ä½œç”¨åŸŸçš„èµ‹å€¼è¯­å¥
2. âœ… åœ¨Data_Init()å‡½æ•°ä¸­åˆå§‹åŒ–é˜ˆå€¼
3. âœ… ä¿æŒä»£ç ç»“æ„æ¸…æ™°

**æœ€ä½³å®è·µ**ï¼š
- å…¨å±€å˜é‡ï¼šå£°æ˜æ—¶åˆå§‹åŒ–
- ç»“æ„ä½“æˆå‘˜ï¼šåœ¨åˆå§‹åŒ–å‡½æ•°ä¸­èµ‹å€¼
- å¸¸é‡ï¼šä½¿ç”¨å®æˆ–constå®šä¹‰

ç°åœ¨ç¼–è¯‘åº”è¯¥æˆåŠŸäº†ï¼